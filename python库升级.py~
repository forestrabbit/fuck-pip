import subprocess
from os import system

p = subprocess.Popen(['pip', 'list'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, err = p.communicate()
l = (output.decode()).split('\r\n')[2:-1]

def parse(string):
    data0 = ''
    data1 = ''
    status = 0
    for x in string:
        if status == 0:
            if x != ' ':
                data0 += x
            else:
                status = 1
        else:
            if x != ' ':
                data1 += x
    return data0, data1

print('Begin to upgrade %s libraries with pip'%len(l))
for i in range(len(l)):
    l[i] = parse(l[i])[0]
    print(str(i) + ': ', end = ' ', flush = True)
    system("pip install --upgrade " + l[i])

input('press enter key to continue...')
